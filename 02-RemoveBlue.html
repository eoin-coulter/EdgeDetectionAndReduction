<html>
 <head>
  <script>
    
    function loadImage() {
      var filename = "images/cookiemonster.jpg";

      var img = new Image();
      img.src = filename;
      img.onload = function() {
         var wid = img.naturalWidth;
         var hgt = img.naturalHeight;

         var canvas = document.getElementById("canvas");
         // this only works if we use width as an attribute rather than a style
         canvas.width = wid; 
         canvas.height = hgt;

         var ctx = canvas.getContext("2d");
         ctx.drawImage(img,0,0,wid,hgt);

         // read pixels
         var imageData = ctx.getImageData(0, 0, wid, hgt);

         // iterate thru pixels, setting the Blue of each to zero
         for (x=0; x<wid; x++) {
            for (y=0; y<hgt; y++) {
               var index = (x + y*imageData.width) * 4;
               /*
               // if we wanted to inspect the pixel data:
               var red = imageData.data[index+0]; 
               var green = imageData.data[index+1];
               var blue = imageData.data[index+2];
               var alpha = imageData.data[index+3];
               */

               // actually all we want to do is modify the pixel data:
               imageData.data[index+2] = 0; // set Blue component of current pixel to zero
            }
         }

         // copy the image data back onto the canvas
         ctx.putImageData(imageData, 0, 0); // at coords 0,0

      }
}
  </script>
 </head>

 <body onload="loadImage();">
   <canvas id="canvas" style="border-width:1px; border-style:solid;" width="500" height="500"></canvas><br>
 </body>
</html>
