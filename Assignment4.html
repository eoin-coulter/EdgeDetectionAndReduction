<html>
<head>
    <script src="imageProcessingFunctions.js"></script>
    <style>
        input { width:25px; }
    </style>
    <script>
        // these globals are set in readImage()
        var imgWidth, imgHeight;
        var ctx;


        function loadImage() {
            var textbox = document.getElementById("filename");
            var filename = textbox.value;
            var canvas = document.getElementById("canvas");
            readImage(canvas,filename);
        }
        function doConvolution() {
             var imageData = ctx.getImageData(0, 0, imgWidth, imgHeight);

            var blurConv2 = [1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9];

            greyscale(imageData);


            var x = convolution3x3(imageData,blurConv2);
            for(i = 0; i<imageData.data.length;i++){
                imageData.data[i] = x[i];
            }


            var XSobelKernel = [-1,0,1,-2,0,2,-1,0,1];
            var YSobelKernel = [-1,-2,-1,0,0,0,1,2,1];
            var Gx = convolution3x3(imageData,XSobelKernel);
            var Gy = convolution3x3(imageData,YSobelKernel);
            var G = magnitude(imageData,Gx,Gy);
            var theta = getEdgeOrientation(imageData,Gx,Gy);

            edgeTrace(G,theta,imageData);











            ctx.putImageData(imageData, 0, 0);




        }
        function compass(){
            var imageData = ctx.getImageData(0, 0, imgWidth, imgHeight);
            greyscale(imageData);
            var Gx = [1,0,-1,1,0,-1,1,0,-1];
            var Gy = [1,1,1,0,0,0,-1,-1,-1];
            var G = magnitude(imageData,Gx,Gy);
            var theta = getEdgeOrientation(imageData,Gx,Gy);
        }
    </script>
</head>

<body>
<canvas id="canvas" style="border-width:1px; border-style:solid;" width="500" height="500"></canvas><br>
<input type="text" id="filename" style="width:600px;" value="images/cookiemonster.jpg"> <input type="button" style="width:100px;" onclick="loadImage();" value="Load Image"><br>


<input type="button" style="width:180px;" value="Apply Convolution Kernel" onclick="doConvolution();">
</body>
</html>
